{
  "version": "4.0.0",
  "project": "dendrix-ai",
  "updated": "2026-01-31",
  "status": "active",
  "spot": "docs/VISION_AND_STRATEGY.md (V2.1)",
  "vision": "Dendrix.ai - Living AI learning platform: DNA → Seed → Sprout → Tree → Fruits → Orchard",
  "principles": ["KISS", "Less is More", "Mobile-First", "Type-Safe", "Andragogy-First"],
  "infrastructure": {
    "github": "required",
    "vercel": "required",
    "supabase": "required",
    "i18n": "paraglide-js",
    "auth": "not_needed"
  },
  "health": {
    "tests": 70,
    "e2e_tests": 6,
    "routes": 7,
    "db_nodes": 28,
    "db_dna_concepts": 4,
    "locales": ["et", "en"],
    "completed_sprints": 13,
    "completed_stories": 95
  },
  "architecture_decisions": {
    "ratified": "2026-01-31",
    "levels": "DNA → Seed → Sprout → Tree → Fruits → Orchard",
    "theme": "Contextual: DNA=Dark Cinematic, Seed=Transitional, Sprout/Tree/Fruits=Light Content-First",
    "tree_view": "Card-Based TreeExplorer primary, D3 Map Toggle desktop-only",
    "input": "Context-Dependent: DNA=Top Fixed, Tree/Explorer=Bottom Floating",
    "animations": "One Hero Animation per step, no ambient noise, prefers-reduced-motion mandatory",
    "sprout_content": ["Tokens", "Vectors", "Attention", "Context Window", "Prompting", "Hallucination"],
    "final_levels": "Fruits (Applications) → Orchard (Career Harvest)",
    "deprecated_terms": ["Nucleus", "Forest", "Seeme", "Võrs"]
  },
  "dna_model": {
    "pipeline": "TEXT → [T] → [V] → [A] → [P] → TEXT",
    "components": {
      "T": {"name": "Tokenization", "color": "#ef4444", "tree": "Roots"},
      "V": {"name": "Vectors", "color": "#22c55e", "tree": "Trunk"},
      "A": {"name": "Attention", "color": "#3b82f6", "tree": "Branches"},
      "P": {"name": "Prediction", "color": "#a855f7", "tree": "Leaves"}
    }
  },
  "current_sprint": {
    "id": "sprint-14",
    "name": "Phase 1: Narrative & Mobile Core",
    "priority": "P0-Critical",
    "source": "docs/BACKLOG.md Phase 1",
    "tasks": [
      {
        "id": "P1.1",
        "title": "Tokenizer Matrix Reveal Animation",
        "priority": "P0",
        "status": "done",
        "type": "animation",
        "owner": "gemini",
        "files": ["components/dna/TokenizationSlicer.tsx"],
        "subtasks": [
          "Implement pill-to-integer flip animation",
          "Add Vector Preview morph state (numbers → coordinates)",
          "Sync timing with DNAContext playbackSpeed"
        ]
      },
      {
        "id": "P1.2",
        "title": "Context-Aware Navigation & Stage System",
        "priority": "P0",
        "status": "in_progress",
        "type": "feature",
        "owner": "gemini",
        "files": ["components/StageSelector.tsx", "lib/contexts/JourneyContext.tsx", "components/TransitionManager.tsx", "components/tree/TreeView.tsx", "app/[locale]/layout.tsx"],
        "notes": "⚠️ SPOT alignment needed: 'forest' → 'fruits'+'orchard', labels need ParaglideJS i18n, /proto route deprecated. See memory key 'gemini-alignment-flags' in project-truth namespace.",
        "subtasks": [
          "✅ StageSelector component created",
          "✅ JourneyContext with URL-based navigation",
          "✅ TransitionManager component",
          "⚠️ Align EvolutionStage type: replace 'forest' with 'fruits' | 'orchard'",
          "⚠️ StageSelector: add Fruits + Orchard stages, remove Forest",
          "⚠️ Add ParaglideJS translations for stage labels",
          "⚠️ Remove /proto route references"
        ]
      },
      {
        "id": "P1.3",
        "title": "Mobile Layout Upgrade",
        "priority": "P0",
        "status": "in_progress",
        "type": "mobile",
        "owner": "opus",
        "files": ["components/dna/DNAComponentCard.tsx", "components/dna/DNAView.tsx (responsive CSS only)"],
        "subtasks": [
          "One Card Per Screen stream for DNA View (mobile <768px)",
          "48px touch targets audit & fix",
          "Snap scrolling for card-to-card navigation"
        ]
      },
      {
        "id": "P1.4",
        "title": "Visual Calibration",
        "priority": "P1",
        "status": "blocked",
        "type": "theme",
        "owner": "unassigned",
        "blocked_by": "P1.2 (StageSelector alignment must complete first)",
        "files": ["components/StageSelector.tsx", "app/[locale]/layout.tsx"],
        "subtasks": [
          "Implement dark/light theme switching logic",
          "Update StageSelector: DNA → Seed → Sprout → Tree → Fruits → Orchard",
          "Remove deprecated level names"
        ]
      },
      {
        "id": "P1.5",
        "title": "Translation Keys for Phase 1",
        "priority": "P1",
        "status": "in_progress",
        "type": "i18n",
        "owner": "opus",
        "files": ["messages/en.json", "messages/et.json"],
        "subtasks": [
          "Stage labels: DNA/Seed/Sprout/Tree/Fruits/Orchard (ET+EN)",
          "FloatingInput placeholder text",
          "Mobile navigation hints"
        ]
      }
    ]
  },
  "upcoming_sprints": {
    "sprint-15": {
      "name": "Phase 2: The Unified Tree",
      "tasks": [
        {"id": "P2.1", "title": "Unified Card System", "type": "architecture"},
        {"id": "P2.2", "title": "Tree Explorer Component", "type": "feature"},
        {"id": "P2.3", "title": "Sprout Level Content", "type": "content"}
      ]
    },
    "sprint-16": {
      "name": "Phase 3: The Harvest",
      "tasks": [
        {"id": "P3.1", "title": "Fruits Level", "type": "feature"},
        {"id": "P3.2", "title": "Orchard Level", "type": "feature"}
      ]
    }
  },
  "file_ownership": {
    "spine_antigravity_only": [
      "components/dna/DNAContext.tsx",
      "components/dna/DNAView.tsx",
      "components/dna/DNAInput.tsx",
      "components/StageSelector.tsx",
      "lib/types.ts",
      "app/[locale]/layout.tsx",
      "app/[locale]/page.tsx"
    ],
    "swarm_parallel_safe": [
      "components/dna/TokenizationSlicer.tsx",
      "components/dna/VectorMap.tsx",
      "components/dna/AttentionSpotlight.tsx",
      "components/dna/PredictionBarChart.tsx",
      "components/dna/MicroLesson.tsx",
      "components/dna/DNAComponentCard.tsx",
      "components/ConceptCard.tsx",
      "components/ConceptLightbox.tsx",
      "components/mobile/*",
      "messages/en.json",
      "messages/et.json"
    ]
  },
  "swarm_config": {
    "topology": "hierarchical",
    "max_agents": 8,
    "strategy": "specialized",
    "consensus": "raft"
  },
  "quality_gates": {
    "performance": "DNA View < 100KB, LCP < 2.5s",
    "accessibility": "WCAG AA, 48px touch targets, keyboard nav",
    "i18n": "100% typed translations ET+EN via ParaglideJS",
    "animations": "prefers-reduced-motion respected, one hero per step",
    "mobile": "One-card-per-screen DNA stream, bottom floating input on Tree"
  }
}
